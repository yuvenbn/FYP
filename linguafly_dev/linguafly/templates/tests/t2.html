<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text to Speech with Voice Selection</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <textarea id="user-text" rows="5"></textarea>
    <select id="voice-select"></select>
    <button id="speak-button">Speak Now</button>

    <script>
        // Get available voices on page load
        window.speechSynthesis.onvoiceschanged = function() {
            var voices = window.speechSynthesis.getVoices();
            var voiceSelect = $("#voice-select");
            
            var i = 0;
            voices.forEach(function(voice) {
                var option = $("<option></option>")
                    .text(voice.name + (voice.lang ? " (" + voice.lang + ")" : "") + i++)
                    .val(voice.name);
                voiceSelect.append(option);
            });
        };

        $("#speak-button").click(function() {
            // Get the text and selected voice
            var text = $("#user-text").val();
            var selectedVoice = $("#voice-select").val();

            if ('speechSynthesis' in window) {
                var utterance = new SpeechSynthesisUtterance(text);
                var voices = window.speechSynthesis.getVoices();
                utterance.voice = voices[95];
                console.log(voices)

                // Set the voice if a voice is selected
                // if (selectedVoice) {
                //     utterance.voice = selectedVoice;
                // }

                // Speak the text
                speechSynthesis.speak(utterance);
            } else {
                alert("Your browser doesn't support Text-to-Speech.");
            }
        });
    </script>
</body>
</html>
